[Unit]
Description=Server Monitor WebSocket Service
Documentation=https://github.com/minhtuancn/server-monitor
After=network.target server-monitor-api.service

[Service]
Type=simple
User=server-monitor
Group=server-monitor
WorkingDirectory=/opt/server-monitor/backend
EnvironmentFile=/etc/server-monitor/server-monitor.env
ExecStart=/opt/server-monitor/.venv/bin/python3 /opt/server-monitor/backend/websocket_server.py
Restart=always
RestartSec=3
StandardOutput=journal
StandardError=journal
SyslogIdentifier=server-monitor-ws

# Security hardening
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths=/var/lib/server-monitor
ReadWritePaths=/var/log/server-monitor

[Install]
WantedBy=multi-user.target
