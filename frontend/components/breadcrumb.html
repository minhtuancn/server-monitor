<!-- Breadcrumb Navigation Component -->
<nav class="breadcrumb-nav" aria-label="Breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="/dashboard.html">
                <i class="fas fa-home"></i>
                <span data-i18n="common.dashboard">Dashboard</span>
            </a>
        </li>
        <!-- Additional breadcrumb items will be inserted dynamically -->
    </ol>
</nav>

<style>
    .breadcrumb-nav {
        background: var(--bg-secondary);
        padding: var(--space-sm) var(--space-xl);
        border-bottom: 1px solid var(--border-primary);
        margin-bottom: var(--space-md);
    }

    .breadcrumb {
        display: flex;
        align-items: center;
        list-style: none;
        margin: 0;
        padding: 0;
        flex-wrap: wrap;
    }

    .breadcrumb-item {
        display: flex;
        align-items: center;
        font-size: var(--text-sm);
        color: var(--text-secondary);
    }

    .breadcrumb-item a {
        color: var(--text-secondary);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.25rem 0.5rem;
        border-radius: var(--radius-sm);
        transition: all var(--transition-base);
    }

    .breadcrumb-item a:hover {
        color: var(--accent);
        background: var(--bg-tertiary);
    }

    .breadcrumb-item.active {
        color: var(--text-primary);
        font-weight: var(--font-medium);
    }

    .breadcrumb-item:not(:last-child)::after {
        content: '/';
        margin: 0 0.5rem;
        color: var(--text-tertiary);
        font-weight: 300;
    }

    .breadcrumb-item i {
        font-size: 0.875rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .breadcrumb-nav {
            padding: var(--space-sm) var(--space-md);
        }

        .breadcrumb-item span:not(.breadcrumb-item:first-child span) {
            display: none;
        }

        .breadcrumb-item i {
            margin-right: 0;
        }
    }
</style>

<script>
    // Breadcrumb Management
    (function() {
        const breadcrumbData = {
            '/dashboard.html': { icon: 'home', text: 'Dashboard' },
            '/index.html': { icon: 'home', text: 'Home' },
            '/server-detail.html': { icon: 'server', text: 'Server Details' },
            '/server-notes.html': { icon: 'sticky-note', text: 'Server Notes' },
            '/terminal.html': { icon: 'terminal', text: 'Terminal' },
            '/settings.html': { icon: 'cog', text: 'Settings' },
            '/domain-settings.html': { icon: 'globe', text: 'Domain Settings' },
            '/email-settings.html': { icon: 'envelope', text: 'Email Settings' },
            '/ssh-keys.html': { icon: 'key', text: 'SSH Keys' },
            '/users.html': { icon: 'users', text: 'User Management' },
            '/notifications.html': { icon: 'bell', text: 'Notifications' },
            '/system-check.html': { icon: 'heartbeat', text: 'System Check' },
            '/login.html': { icon: 'sign-in-alt', text: 'Login' }
        };

        function initBreadcrumb() {
            const currentPath = window.location.pathname;
            const breadcrumbList = document.querySelector('.breadcrumb');
            
            if (!breadcrumbList) return;

            // Get page info
            const pageInfo = breadcrumbData[currentPath] || { 
                icon: 'file', 
                text: document.title || 'Page' 
            };

            // Don't show breadcrumb on dashboard (it's the home)
            if (currentPath === '/dashboard.html' || currentPath === '/index.html') {
                const breadcrumbNav = document.querySelector('.breadcrumb-nav');
                if (breadcrumbNav) breadcrumbNav.style.display = 'none';
                return;
            }

            // Add current page to breadcrumb
            const currentItem = document.createElement('li');
            currentItem.className = 'breadcrumb-item active';
            currentItem.innerHTML = `
                <i class="fas fa-${pageInfo.icon}"></i>
                <span>${pageInfo.text}</span>
            `;
            breadcrumbList.appendChild(currentItem);

            // Add server name if available (from URL params or localStorage)
            const urlParams = new URLSearchParams(window.location.search);
            const serverId = urlParams.get('id');
            const serverName = urlParams.get('name') || localStorage.getItem(`server_${serverId}_name`);
            
            if (serverName && (currentPath.includes('server-detail') || currentPath.includes('server-notes'))) {
                // Insert server item before current page
                const serverItem = document.createElement('li');
                serverItem.className = 'breadcrumb-item';
                serverItem.innerHTML = `
                    <a href="/server-detail.html?id=${serverId}">
                        <i class="fas fa-server"></i>
                        <span>${serverName}</span>
                    </a>
                `;
                breadcrumbList.insertBefore(serverItem, currentItem);
            }
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initBreadcrumb);
        } else {
            initBreadcrumb();
        }
    })();
</script>
