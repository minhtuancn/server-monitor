# Server Monitor Dashboard - Environment Configuration
# Copy this file to .env and update the values

# ==================== SECURITY (REQUIRED) ====================
# JWT Secret Key (REQUIRED - MUST change in production!)
# SECURITY: Use a strong random value with at least 32 characters
# Generate a secure key: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET=REPLACE_WITH_SECURE_RANDOM_VALUE

# JWT Token expiration in seconds (default: 86400 = 24 hours)
JWT_EXPIRATION=86400

# Encryption key for SSH passwords (REQUIRED - MUST change in production!)
# SECURITY: Use a strong random value with at least 24 characters
# Generate: python3 -c "import secrets; print(secrets.token_urlsafe(24))"
ENCRYPTION_KEY=REPLACE_WITH_SECURE_RANDOM_VALUE

# SSH Key Vault Master Key (REQUIRED for Phase 4 - MUST change in production!)
# Used for AES-256-GCM encryption of SSH private keys in key vault
# SECURITY: Use a strong random value with at least 32 characters
# Generate: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
KEY_VAULT_MASTER_KEY=REPLACE_WITH_SECURE_RANDOM_VALUE

# ==================== DATABASE ====================
# SQLite database path (optional - defaults to <project_root>/data/servers.db)
# Use relative path for portability, or absolute path for specific deployment
# DB_PATH=./data/servers.db

# ==================== SERVER ====================
# API server port
API_PORT=9083

# Frontend server port
FRONTEND_PORT=9081

# WebSocket server port
WEBSOCKET_PORT=9085

# Terminal server port
TERMINAL_PORT=9084

# ==================== TERMINAL (Phase 6) ====================
# Terminal session idle timeout in seconds (default: 1800 = 30 minutes)
# Set to 0 to disable timeout
TERMINAL_IDLE_TIMEOUT_SECONDS=1800

# ==================== AUDIT LOGS (Phase 6) ====================
# Audit log retention in days (default: 90)
# Logs older than this will be eligible for cleanup
AUDIT_RETENTION_DAYS=90

# Enable/disable automatic audit log cleanup (default: true)
# Set to false to disable cleanup entirely
AUDIT_CLEANUP_ENABLED=true

# Interval between cleanup runs in hours (default: 24)
# Controls how often the cleanup job runs
AUDIT_CLEANUP_INTERVAL_HOURS=24

# ==================== EMAIL ALERTS ====================
# SMTP configuration (optional)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=your-email@gmail.com
# SMTP_TO=admin@example.com

# ==================== TELEGRAM (optional) ====================
# TELEGRAM_BOT_TOKEN=your-bot-token
# TELEGRAM_CHAT_ID=your-chat-id

# ==================== SLACK (optional) ====================
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxx/yyy/zzz

# ==================== TASKS CONFIGURATION (Phase 4 Module 4) ====================
# Default behavior for storing task output (0 = don't store, 1 = store)
TASKS_STORE_OUTPUT_DEFAULT=0

# Maximum output size to store (in bytes, default: 65536 = 64KB)
TASKS_OUTPUT_MAX_BYTES=65536

# Maximum concurrent tasks per server (default: 1)
TASKS_CONCURRENT_PER_SERVER=1

# Default task timeout in seconds (default: 60)
TASKS_DEFAULT_TIMEOUT=60

# Number of task worker threads (default: 4)
TASKS_NUM_WORKERS=4

# ==================== TASK SAFETY POLICY (Phase 6) ====================
# Task policy mode: 'denylist' (default) or 'allowlist'
# - denylist: Block dangerous commands, allow everything else
# - allowlist: Only allow explicitly permitted commands
TASK_POLICY_MODE=denylist

# Custom dangerous patterns to deny (comma-separated regex patterns)
# Only used in denylist mode
# TASK_DENY_PATTERNS=pattern1,pattern2,pattern3

# Custom allowed patterns (comma-separated regex patterns)
# Only used in allowlist mode
# TASK_ALLOW_PATTERNS=^ls\b,^cat\b,^grep\b

# ==================== PLUGIN SYSTEM (Phase 8) ====================
# Enable plugin system
PLUGINS_ENABLED=false

# Comma-separated list of allowed plugins (security: allowlist approach)
# Only plugins in this list will be loaded
PLUGINS_ALLOWLIST=

# Example: Enable webhook plugin
# PLUGINS_ENABLED=true
# PLUGINS_ALLOWLIST=webhook
# PLUGIN_WEBHOOK_CONFIG={"url":"https://example.com/webhook","secret":"your-webhook-secret","event_types":["task.finished","alert.triggered"],"timeout":10,"retry_max":3}

# ==================== WEBHOOKS (Phase 8) ====================
# Webhook delivery log retention (default: 90 days)
# Logs older than this will be eligible for cleanup
WEBHOOK_DELIVERY_LOG_MAX_DAYS=90

# Enable/disable automatic webhook delivery log cleanup (default: true)
WEBHOOK_DELIVERY_CLEANUP_ENABLED=true

# Interval between cleanup runs in hours (default: 24)
WEBHOOK_DELIVERY_CLEANUP_INTERVAL_HOURS=24

# Maximum webhook payload size in bytes (default: 65536 = 64KB)
# Payloads exceeding this limit will be truncated
WEBHOOK_PAYLOAD_MAX_BYTES=65536

# Webhook timeout bounds (in seconds)
# Min: Minimum allowed timeout (default: 3)
# Max: Maximum allowed timeout (default: 60)
WEBHOOK_TIMEOUT_MIN=3
WEBHOOK_TIMEOUT_MAX=60

# Webhook retry bounds
# Max: Maximum allowed retries (default: 5)
WEBHOOK_RETRY_MAX_LIMIT=5

# ==================== SECURITY NOTES ====================
# IMPORTANT: 
# 1. Never commit the actual .env file with real secrets to version control
# 2. Use strong random values for all secret keys (32+ characters recommended)
# 3. Rotate secrets regularly in production environments
# 4. Store secrets securely using secret management tools in production
# 5. Different environments (dev/staging/prod) should use different secrets
